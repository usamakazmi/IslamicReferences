Muslims in Yemen vs Mushrik in Makkah - Muslims win

Start date: March 627 AD, Shawal 5 AH
Location: Medina, Saudi Arabia
End date: April 627 AD
27 days long

Before battle starts muslims dig a long khandaq, a heavey stone is 
found which no one is able to break then Muhammad(s.a.w) takes a 
hammer hits it 3 times and turn it to dust, he smiles after every
hit and says that each time Allah promised me something, 1st time
victory over syrian empire, 2nd time victory over persian adn 3rd
time victory over yemen. 

Hazrat Saad ibn Ma'uz is hit by an arrow.

Banu Quraiza break their oath with Muslims and betray them.

Hazrat Ali vs his uncle Amr, he wins and spares his uncle but
his uncle tries to stab him with a dagger then Hazrat Ali kills him.

Hazrat Salman Farsi suggests the digging of trench/khandaq, prophet 
declares him one of his family when muhajir and ansar argue over
to whom Salman belongs to.

Khalid bin Waleed and Amr bin as still non muslims.

After winning Muslims conquer Banu Quraiza.

After war Hazrat Amr leaves Mushrik but does not join Muslims.

---------------------------------------------------------------------
Aftermath
---------------------------------------------------------------------
Muslims go to do umrah in Makkah after this in 6 AH.
Hazrat Usman talks with Mushrik in Makka, rumor spreads that Mushrik
killed Hazrat Usman, Muslims consider this declaration of war but 
Mushrik return Hazrat Usman safely to Muslims.
It is decided that Muslims will come for umrah next year.
Treaty of Hudaibiah takes place no fighting for 10 years, if a non 
muslims converts to Islam without permission then he will be returned 
to mushrikin but if a muslim is convert to non muslim he doesnt need 
permission and next year muslims will be allowed to do umrah in makkah
for 3 days and wont bring any weapons.

Al bakr qabeela few years later attacks muslims and kills them they 
were funded by mushrikeen of makkah thus treaty was broken.